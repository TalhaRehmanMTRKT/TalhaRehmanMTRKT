<!--
  SAMPLE BLOG POST: Understanding Microgrid Energy Management
-->

<p>
  Multi-energy microgrids represent a paradigm shift in how we think about distributed energy systems.
  By integrating electrical, thermal, and hydrogen-based resources, these systems can achieve superior
  efficiency, resilience, and sustainability compared to traditional single-energy approaches.
</p>

<h2>What is a Multi-Energy Microgrid?</h2>

<p>
  A multi-energy microgrid is a localized energy system that manages multiple energy carriers — 
  electricity, heat, cooling, and sometimes hydrogen or natural gas — in a coordinated manner. 
  The key advantage is the ability to exploit synergies between different energy vectors.
</p>

<h2>The Optimization Problem</h2>

<p>
  The optimal energy management problem can be formulated as a mixed-integer linear program (MILP).
  The objective typically minimizes the total operating cost:
</p>

$$
\min \sum_{t=1}^{T} \left[ C_{\text{grid}}(t) \cdot P_{\text{grid}}(t) + C_{\text{fuel}}(t) \cdot P_{\text{gen}}(t) + C_{\text{OM}} \right]
$$

<p>
  Subject to power balance constraints for each energy carrier:
</p>

$$
P_{\text{grid}}(t) + P_{\text{PV}}(t) + P_{\text{gen}}(t) + P_{\text{dis}}(t) = P_{\text{load}}(t) + P_{\text{ch}}(t) \quad \forall t
$$

<p>
  Where $P_{\text{grid}}(t)$ is the grid power exchange, $P_{\text{PV}}(t)$ is solar generation,
  $P_{\text{gen}}(t)$ is dispatchable generation, $P_{\text{dis}}(t)$ and $P_{\text{ch}}(t)$ are 
  battery discharge and charge power, and $P_{\text{load}}(t)$ is the electrical load.
</p>

<h2>Energy Storage Modeling</h2>

<p>
  Battery energy storage follows a state-of-charge (SoC) transition equation:
</p>

$$
SoC(t) = SoC(t-1) + \eta_{\text{ch}} \cdot P_{\text{ch}}(t) \cdot \Delta t - \frac{P_{\text{dis}}(t) \cdot \Delta t}{\eta_{\text{dis}}}
$$

<p>
  This must be bounded: $SoC_{\min} \leq SoC(t) \leq SoC_{\max}$ for all time steps.
</p>

<h2>Implementation in Python</h2>

<p>Here's a simplified example using Python with a generic optimization interface:</p>

<pre><code class="language-python">import numpy as np

# Parameters
T = 24  # hours
grid_price = np.array([...])  # $/kWh for each hour
pv_generation = np.array([...])  # kW
load_demand = np.array([...])  # kW

# Battery parameters
soc_min, soc_max = 0.2, 0.9  # fraction
battery_capacity = 100  # kWh
eta_ch, eta_dis = 0.95, 0.95

# This is where you'd set up CPLEX/Gurobi/PuLP variables
# and define the optimization model...
print(f"Optimizing over {T} time steps")
print(f"Battery capacity: {battery_capacity} kWh")
</code></pre>

<h2>Carbon Emission Considerations</h2>

<p>
  Modern microgrid operation increasingly accounts for carbon emissions. We can add an emission
  cost to the objective function:
</p>

$$
C_{\text{emission}} = \sum_{t=1}^{T} \epsilon_{\text{grid}}(t) \cdot P_{\text{grid}}(t) \cdot \Delta t \cdot \lambda_{\text{CO}_2}
$$

<p>
  Where $\epsilon_{\text{grid}}(t)$ is the grid emission factor (kg CO$_2$/kWh) and 
  $\lambda_{\text{CO}_2}$ is the carbon price ($/kg CO$_2$).
</p>

<blockquote>
  Incorporating carbon costs transforms the optimization from purely economic to eco-economic,
  often leading to increased renewable utilization and storage cycling.
</blockquote>

<h2>Key Takeaways</h2>

<ul>
  <li>Multi-energy microgrids enable cross-vector optimization for better efficiency.</li>
  <li>MILP formulations capture binary decisions (on/off states) along with continuous variables.</li>
  <li>Carbon emission modeling adds an environmental dimension to the economic optimization.</li>
  <li>Proper storage modeling with SoC constraints ensures battery longevity.</li>
</ul>

<p>
  For more details and complete code implementations, check out the 
  <a href="https://github.com/TalhaRehmanMTRKT/MicrogridOptimization" target="_blank">MicrogridOptimization</a>
  repository.
</p>
